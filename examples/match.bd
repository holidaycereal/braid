-* match expression *-

-- immediate return
def factorial(x) : int -> int = match x {
	0 -> 1,
	n -> n * factorial(n - 1),
};

-- some imperative boilerplate, then return
def process(x) : int -> int proc
	if not valid(x) then
		log_error();
		return -1;
	end
	return match computation(x).value {
		ok(v) -> v,
		error(_) -> -2,
	};
end
